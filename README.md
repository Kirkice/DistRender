# DistRender - æ¸²æŸ“å¼•æ“

ä¸€ä¸ªæ”¯æŒå¤šå›¾å½¢ API çš„ç°ä»£åŒ–æ¸²æŸ“å¼•æ“ï¼Œç›®å‰æ”¯æŒ Vulkanã€DirectX 12 ä¸ wgpuã€‚

## âœ¨ ç‰¹æ€§

- ğŸ¨ **å¤šåç«¯æ”¯æŒ**ï¼šæ”¯æŒ Vulkanï¼ˆè·¨å¹³å°ï¼‰ã€DirectX 12ï¼ˆWindowsï¼‰ä¸ wgpuï¼ˆè·¨å¹³å°æŠ½è±¡åç«¯ï¼‰
- ğŸ”§ **ç»Ÿä¸€æ¥å£**ï¼šç»Ÿä¸€çš„ `renderer::Renderer` æ¥å£ï¼Œåœ¨è¿è¡Œæ—¶é€‰æ‹©åç«¯
- ğŸ›ï¸ **GUI ç³»ç»Ÿ**ï¼š
  - wgpu åç«¯ï¼šå†…ç½® egui é¢æ¿
  - Vulkan/DX12 åç«¯ï¼šå¤–éƒ¨ GUI è¿›ç¨‹ï¼ˆ`dist_render_gui`ï¼‰+ å…±äº«å†…å­˜åŒæ­¥å‚æ•°
- ğŸ–±ï¸ **è¾“å…¥ç³»ç»Ÿ**ï¼šåŸºäº winit çš„é”®é¼ è¾“å…¥ï¼Œæ”¯æŒ WASD ç§»åŠ¨ä¸å³é”®æ‹–æ‹½è§†è§’
- âš¡ **äº‹ä»¶ç³»ç»Ÿ**ï¼šç±»å‹å®‰å…¨ã€é›¶æˆæœ¬æŠ½è±¡çš„äº‹ä»¶å¤„ç†æ¡†æ¶
- ğŸ› ï¸ **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¸…æ™°çš„æ¨¡å—åˆ’åˆ†ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•

## ğŸš€ å¿«é€Ÿå¼€å§‹

### è¿è¡Œä¸»ç¨‹åºï¼ˆé»˜è®¤ï¼‰

ç”±äºå·¥ç¨‹åŒ…å«å¤šä¸ªäºŒè¿›åˆ¶ç¨‹åºï¼ˆä¸»æ¸²æŸ“å™¨ + å¤–éƒ¨ GUIï¼‰ï¼Œå·²åœ¨ `Cargo.toml` é…ç½® `default-run = "dist_render"`ï¼Œå› æ­¤ä»¥ä¸‹å‘½ä»¤ä¼šé»˜è®¤è¿è¡Œä¸»ç¨‹åºï¼š

```bash
cargo run
```

### é€‰æ‹©å›¾å½¢åç«¯

- Vulkanï¼š

```bash
cargo run -- --vulkan
```

- DirectX 12ï¼š

```bash
cargo run -- --dx12
```

- wgpuï¼š

```bash
cargo run -- --wgpu
```

### å¤–éƒ¨ GUIï¼ˆä»… Vulkan/DX12 é»˜è®¤å¯ç”¨ï¼‰

å½“ä½¿ç”¨ Vulkan / DX12 åç«¯æ—¶ï¼Œä¸»ç¨‹åºä¼šè‡ªåŠ¨å¯åŠ¨å¤–éƒ¨ GUI ç¨‹åº `dist_render_gui`ï¼Œå¹¶é€šè¿‡å…±äº«å†…å­˜æŠŠ GUI å‚æ•°åŒæ­¥åˆ°æ¸²æŸ“åç«¯ã€‚

ä½ ä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæ§åˆ¶ï¼š

- å¼ºåˆ¶å¯ç”¨å¤–éƒ¨ GUIï¼š

```bash
cargo run -- --external-gui
```

- ç¦ç”¨å¤–éƒ¨ GUIï¼š

```bash
cargo run -- --no-external-gui
```

### å•ç‹¬è¿è¡Œå¤–éƒ¨ GUI ç¨‹åº

```bash
cargo run --bin dist_render_gui
```

è¯´æ˜ï¼šä¸»ç¨‹åºå¯åŠ¨å¤–éƒ¨ GUI æ—¶ï¼Œä¼šæŒ‰ä»¥ä¸‹é¡ºåºæŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶ï¼š

- **ä¼˜å…ˆï¼ˆBï¼‰**ï¼šä¸»ç¨‹åºå¯æ‰§è¡Œæ–‡ä»¶åŒç›®å½•ä¸‹çš„ `dist_render_gui(.exe)`
- **å…œåº•ï¼ˆAï¼‰**ï¼š`target/debug/dist_render_gui(.exe)`

### Release æ¨¡å¼

```bash
cargo run --release
```

## ğŸ“ é¡¹ç›®ç»“æ„ï¼ˆç®€åŒ–ï¼‰

```
DistRender/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs                  # ä¸»æ¸²æŸ“ç¨‹åºå…¥å£ï¼ˆdist_renderï¼‰
â”‚   â”œâ”€â”€ lib.rs                   # åº“å…¥å£ï¼ˆä¾›å¤šä¸ª bin å¤ç”¨ï¼‰
â”‚   â”œâ”€â”€ bin/
â”‚   â”‚   â””â”€â”€ dist_render_gui.rs   # å¤–éƒ¨ GUI ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ core/                    # æ ¸å¿ƒæ¨¡å—ï¼šé…ç½®/æ—¥å¿—/æ•°å­¦/è¾“å…¥/äº‹ä»¶ç­‰
â”‚   â”œâ”€â”€ gfx/                     # åç«¯å®ç°ï¼švulkan / dx12 / wgpu
â”‚   â”œâ”€â”€ renderer/                # ç»Ÿä¸€ Renderer æ¥å£ + é€šç”¨æ¸²æŸ“èµ„æº
â”‚   â””â”€â”€ gui/                     # GUI ç³»ç»Ÿï¼ˆwgpu å†…ç½® + å…±äº«å†…å­˜ IPCï¼‰
â””â”€â”€ Cargo.toml
```

## âš¡ äº‹ä»¶ç³»ç»Ÿ

DistRender æä¾›äº†ä¸€ä¸ªç±»å‹å®‰å…¨ã€é«˜æ€§èƒ½çš„äº‹ä»¶å¤„ç†æ¡†æ¶ï¼Œå‚è€ƒäº† DistEngine (C++) çš„è®¾è®¡ç†å¿µã€‚

### ç‰¹æ€§

- âœ… **ç±»å‹å®‰å…¨** - ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯
- âœ… **é›¶æˆæœ¬æŠ½è±¡** - æ— è¿è¡Œæ—¶å¼€é”€ï¼Œæ€§èƒ½åª²ç¾æ‰‹å†™ä»£ç 
- âœ… **äº‹ä»¶å¤„ç†é“¾** - æ”¯æŒå¤šä¸ªå¤„ç†å™¨é“¾å¼å¤„ç†åŒä¸€äº‹ä»¶
- âœ… **æ˜“äºæ‰©å±•** - è½»æ¾æ·»åŠ æ–°çš„äº‹ä»¶ç±»å‹

### æ”¯æŒçš„äº‹ä»¶ç±»å‹

| ç±»åˆ« | äº‹ä»¶ç±»å‹ | è¯´æ˜ |
|------|---------|------|
| **çª—å£** | `WindowResizeEvent` | çª—å£å¤§å°è°ƒæ•´ |
| | `WindowCloseEvent` | çª—å£å…³é—­ |
| **é¼ æ ‡** | `MouseButtonEvent` | é¼ æ ‡æŒ‰é’®æŒ‰ä¸‹/é‡Šæ”¾ |
| | `MouseMoveEvent` | é¼ æ ‡ç§»åŠ¨ |
| | `MouseScrollEvent` | é¼ æ ‡æ»šè½® |
| **é”®ç›˜** | `KeyboardEvent` | é”®ç›˜æŒ‰é”®æŒ‰ä¸‹/é‡Šæ”¾ |
| **ç³»ç»Ÿ** | `TickEvent` | æ¯å¸§æ—¶é’Ÿäº‹ä»¶ |
| | `DrawEvent` | ç»˜åˆ¶äº‹ä»¶ |

### è¿è¡Œæ¼”ç¤º

```bash
cargo run --example event_system_demo
```

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### åˆ†å±‚æ¶æ„ï¼ˆæ¦‚å¿µï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Application            â”‚  åº”ç”¨å±‚ï¼ˆmain.rsï¼‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Rendererï¼ˆç»Ÿä¸€æ¥å£ï¼‰       â”‚  æ¸²æŸ“å±‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Vulkan    â”‚   DX12     â”‚  wgpu  â”‚  åç«¯å±‚
â”‚  Renderer  â”‚  Renderer  â”‚Rendererâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ æŠ€æœ¯æ ˆ

- **Rust**ï¼šç³»ç»Ÿç¼–ç¨‹è¯­è¨€
- **Winit**ï¼šè·¨å¹³å°çª—å£ç®¡ç†
- **Vulkan**ï¼šé€šè¿‡ `vulkano`/`ash`
- **DirectX 12**ï¼šé€šè¿‡ `windows-rs`
- **wgpu**ï¼šè·¨å¹³å°å›¾å½¢æŠ½è±¡
- **egui**ï¼šGUI æ¡†æ¶ï¼ˆwgpu å†…ç½®æ¸²æŸ“ï¼›Vulkan/DX12 é€šè¿‡å¤–éƒ¨ GUI + IPC åŒæ­¥ï¼‰

## ğŸ“„ è®¸å¯è¯

MIT License
